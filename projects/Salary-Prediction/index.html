<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Salary Prediction | Linh P. Nguyen</title> <meta name="author" content="Linh P. Nguyen"> <meta name="description" content="project utilized Python and SparkML to analyze and visualize employee salaries across industries, applying machine learning models to predict salary trends based on experience and industry metrics"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9C%BF&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://npl0204.github.io/projects/Salary-Prediction/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Linh </span>P. Nguyen</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog</a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Salary Prediction</h1> <p class="post-description">project utilized Python and SparkML to analyze and visualize employee salaries across industries, applying machine learning models to predict salary trends based on experience and industry metrics</p> </header> <article> <h2 id="overview">Overview</h2> <ul> <li>Mined and cleaned data from over 1 million records using SparkML and SparkSQL following the ETL process and Label Encoding method.</li> <li>Built and trained 5 regression machine learning models to predict the salary to find the best-predicted salary model based on backgrounds by comparing RMSE and R-squared scores. The model with the best scores has an R-squared of 74.88%.</li> <li>Please visit the project using this <a href="https://github.com/npl0204/Salary-Prediction/blob/main/SalaryPrediction.ipynb" rel="external nofollow noopener" target="_blank">link to my notebook</a>.</li> </ul> <h2 id="details">Details</h2> <h3 id="data-profile"><strong>Data Profile:</strong></h3> <p>For this project, I used the Employee Salaries dataset from Kaggle, containing nine columns and 1,000,000 rows. This dataset features employee details related to salaries. My goal was to predict salaries using the initial eight features, and I also created visualizations to understand relationships within the dataset.</p> <h3 id="data-transformation"><strong>Data Transformation:</strong></h3> <p>Data transformation involves changing data structure and format. It’s vital for enhancing business and analytic processes. There are four types of transformations: aesthetic (standardizing data), constructive (adding or replicating data), destructive (deleting data), and structural (altering database structure). The process includes extraction from sources, transformation through cleansing, standardizing, and other tasks, and then loading into a database.</p> <p>For this project:</p> <ul> <li>I loaded the data from Kaggle to a Google Notebook.</li> <li>Merged separate training and actual salary datasets.</li> <li>Used PySpark SQL for easy data extraction and similarity to SQL language.</li> <li>Removed rows with unlikely $0 salaries for high-paying roles.</li> <li>Created a cloned data frame without the “jobID” column.</li> <li>Performed label encoding for the “degree” feature and One-Hot Encoding for other categorical features.</li> <li>Prepared data for machine learning by combining features into a single “features” column.</li> <li>Divided the data into training and testing sets. After experimenting with various ratios like 50-50% and 70-30%, I settled on a 99.5-0.5% split, giving me over 994,000 training examples and about 5,000 test examples. The choice was driven by the observation that a larger training set improved the R-squared score.</li> </ul> <p>(Note: The detailed explanation on R-squared scores for different ratios seems to be visual in nature, provided through screenshots, and hence can’t be summarized without seeing the actual content.)</p> <h3 id="visualizing-and-analyzing-the-dataset"><strong>Visualizing and Analyzing the Dataset</strong></h3> <ol> <li> <strong>Dataset Overview</strong> I began by employing SQL queries to identify various insights such as the highest-paid job, the top 10 highest/lowest-paid jobs, and ranking industries based on salary. A clear example of this is illustrated in diagram below, where I identified that the maximum salary amounting to $301k is affiliated with the CFO and CTO roles in the Oil industry.</li> </ol> <div class="col"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/25-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/25-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/25-1400.webp"></source> <img src="/assets/img/25.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="example image" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <ol> <li> <strong>Key Findings from the Visuals</strong> <ul> <li> <strong>High and Low Salaries:</strong> The two screenshots below delineate the top 10 highest and lowest paying roles. A majority of the high-salary roles are dominated by the Oil and Finance sectors. Conversely, roles with the lowest salaries unanimously hail from the Education sector.</li> </ul> </li> </ol> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/26-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/26-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/26-1400.webp"></source> <img src="/assets/img/26.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="example image" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/27-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/27-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/27-1400.webp"></source> <img src="/assets/img/27.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="example image" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <ul> <li> <strong>Industry Salary Rankings:</strong> I further ranked industries based on their average salaries and found, that the Oil industry topped the list with an average exceeding $130K, whereas the Education sector recorded the lowest near $100K.</li> </ul> <div class="col"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/28-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/28-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/28-1400.webp"></source> <img src="/assets/img/28.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="example image" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <ul> <li> <strong>Salary Visualization:</strong> I translated the industry salary rankings into a more digestible format using a horizontal bar chart. This visual representation accentuates the salary variations across different industries, with the Oil, Finance, and Web sectors leading.</li> </ul> <div class="col"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/29-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/29-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/29-1400.webp"></source> <img src="/assets/img/29.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="example image" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <ul> <li> <strong>Experience vs. Salary:</strong> To discern any correlation between an employee’s years of experience and their salary, I constructed a line graph. Generally, salary tends to increase with experience, albeit contingent on factors like the employer, role, job specifics, etc.</li> </ul> <div class="col"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/30-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/30-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/30-1400.webp"></source> <img src="/assets/img/30.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="example image" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <ol> <li> <strong>Interesting Code Snippets</strong> In the coding segment of the project, I integrated PySpark for machine learning purposes. Our focus was on two models: Gradient Boosting Tree Regression (due to its superior prediction capabilities for our dataset) and Linear Regression (owing to its ubiquitous use in machine learning).</li> </ol> <p><em>Note:</em> Despite the simplicity of the associated codes, running each model took about 30 minutes given the substantial dataset size.</p> <h3 id="evaluation-metrics"><strong>Evaluation Metrics:</strong></h3> <ul> <li> <strong>RMSE:</strong> This metric gauges the mean disparity between predicted and actual values in a dataset. A lower RMSE implies a more fitting model.</li> <li> <strong>R-squared (R2):</strong> This measures how much variance in the response variable can be attributed to predictor variables. R2 values range between 0 and 1, with a higher value indicating a better model fit.</li> </ul> <p>I will delve deeper into the prediction outcomes and these metrics in Section 8.</p> <h3 id="results-and-insights"><strong>Results and Insights</strong></h3> <p>Here, I showcase the predictions from my machine-learning model. The correlation between actual and predicted salaries implies that as the former rises, so does the latter. Figures below present scatter plots comparing actual salaries against those predicted by the Gradient Boosting Tree Regression and Linear Regression models, respectively.</p> <div class="row"> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/31-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/31-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/31-1400.webp"></source> <img src="/assets/img/31.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="example image" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> <div class="col-sm mt-3 mt-md-0"> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/32-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/32-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/32-1400.webp"></source> <img src="/assets/img/32.png" class="img-fluid rounded z-depth-1" width="auto" height="auto" title="example image" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <div class="caption"> Scatter plots of actual salary vs. predicted salary using Gradient Boosting Tree Regression model and Linear Regression model </div> <p>Apart from the two primary models, I also explored three others: Generalized Linear Regression, Decision Tree Regressor, and Random Forest Regressor. In terms of RMSE, the Gradient Boosting Tree Regression model stood out as the most accurate, while its counterpart, the Decision Tree Regressor, recorded the least precision. Conversely, for the R2 score, the Gradient Boosting Tree Regression model ranked the highest.</p> <p>Moreover, my project employed the CRISP-DM approach, encapsulating processes ranging from understanding the business and data to data preparation, modeling, evaluation, and deployment.</p> </article><div id="giscus_thread" style="max-width: 800px; margin: 0 auto;"> <script>let giscusTheme=localStorage.getItem("theme"),giscusAttributes={src:"https://giscus.app/client.js","data-repo":"alshedivat/al-folio","data-repo-id":"MDEwOlJlcG9zaXRvcnk2MDAyNDM2NQ==","data-category":"Comments","data-category-id":"DIC_kwDOA5PmLc4CTBt6","data-mapping":"title","data-strict":"1","data-reactions-enabled":"1","data-emit-metadata":"0","data-input-position":"bottom","data-theme":giscusTheme,"data-lang":"en",crossorigin:"anonymous",async:""},giscusScript=document.createElement("script");Object.entries(giscusAttributes).forEach(([t,a])=>giscusScript.setAttribute(t,a)),document.getElementById("giscus_thread").appendChild(giscusScript);</script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2023 Linh P. Nguyen. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Last updated: October 30, 2023. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>